<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sistem Gudang SMS</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{font-family:Arial;padding:20px}
input,button{padding:5px;margin:5px}
table{border-collapse:collapse;width:100%}
th,td{border:1px solid #ccc;padding:5px;text-align:center}
th{background:#2e7d32;color:white}
</style>
</head>
<body>

<h2>Sistem Gudang PT SMS</h2>

<h3>Master Barang</h3>
<input id="kode" placeholder="Kode">
<input id="nama" placeholder="Nama">
<button onclick="tambah()">Tambah</button>

<h3>Barang Masuk</h3>
<input id="kodeMasuk" placeholder="Kode">
<input id="qtyMasuk" type="number" placeholder="Qty">
<button onclick="masuk()">Masuk</button>

<h3>Barang Keluar</h3>
<input id="kodeKeluar" placeholder="Kode">
<input id="qtyKeluar" type="number" placeholder="Qty">
<button onclick="keluar()">Keluar</button>

<h3>Stok</h3>
<table>
<thead>
<tr><th>Kode</th><th>Stok</th></tr>
</thead>
<tbody id="stokTable"></tbody>
</table>

<script>

var firebaseConfig = {
 apiKey: "AIzaSyAucO3yaRtvL-v9zCK_6-ThNJVT-kRF3jg",
    authDomain: "gudang-anto-2026.firebaseapp.com",
    databaseURL: "https://gudang-anto-2026-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "gudang-anto-2026",
    storageBucket: "gudang-anto-2026.firebasestorage.app",
    messagingSenderId: "711961129196",
    appId: "1:711961129196:web:7e2d2e74539e112dfff5c9"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.database();

function tambah(){
var k=document.getElementById("kode").value;
var n=document.getElementById("nama").value;
if(k==""||n==""){alert("Isi data");return;}
db.ref("barang/"+k).set({nama:n});
alert("Barang ditambah");
}

function masuk(){
var k=document.getElementById("kodeMasuk").value;
var q=parseInt(document.getElementById("qtyMasuk").value);
if(!k||!q){alert("Isi data");return;}
db.ref("stok/"+k).once("value",function(s){
var lama=s.val()||0;
db.ref("stok/"+k).set(lama+q);
});
}

function keluar(){
var k=document.getElementById("kodeKeluar").value;
var q=parseInt(document.getElementById("qtyKeluar").value);
if(!k||!q){alert("Isi data");return;}
db.ref("stok/"+k).once("value",function(s){
var lama=s.val()||0;
if(lama<q){alert("Stok kurang");return;}
db.ref("stok/"+k).set(lama-q);
});
}

db.ref("stok").on("value",function(snapshot){
var html="";
snapshot.forEach(function(child){
html+="<tr>";
html+="<td>"+child.key+"</td>";
html+="<td>"+child.val()+"</td>";
html+="</tr>";
});
document.getElementById("stokTable").innerHTML=html;
});

</script>

</body>
</html>